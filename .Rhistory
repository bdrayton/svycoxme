geom_segment() +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Event time", y = "Event rank") +
scale_y_continuous(limits = rev)
pdat = test_data %>%
mutate(new_start = 0,
new_end = t_end - t_start) %>%
arrange(new_end) %>%
mutate(event = as.factor(row_number()))
pdup = pdat[rep(seq_len(nrow(pdat)), nrow(pdat)), ]
pdup$event_time = rep(pdat$new_end, each = nrow(pdat))
pdup$event_start = 0
pdup = pdup %>%
mutate(in_risk_set = (event_time > new_start & event_time <= new_end),
event_observed = (event_start < new_end) & (event_time >= new_end))
pdup$facet_label = factor(rep(paste0("t=t", 1:6), each = 6),
levels = c("t=t1", "t=t2", "t=t3", "t=t4", "t=t5", "t=t6"),
labels = c("'t=t'[1]", "'t=t'[2]", "'t=t'[3]", "'t=t'[4]", "'t=t'[5]", "'t=t'[6]"))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end, colour = in_risk_set)) +
geom_segment() +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Event time", y = "Event rank") +
scale_y_continuous(limits = rev)
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end, colour = in_risk_set)) +
geom_segment() +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Event time", y = "Event rank") +
scale_y_discrete(limits = rev)
names(pdup)
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end, colour = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = stat))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end, colour = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Event time", y = "Event rank") +
scale_y_discrete(limits = rev)
pdup$stat = factor(pdup$stat, c(0,1), c("censored", "event"))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end, colour = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Event time", y = "Event rank") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 1))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 1)) +
guides(fill = "none")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none")
pdat
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdat, aes(xintercept = new_end))
seq(1, 36, by = 6)
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdat[seq(1, 36, by = 6),], aes(xintercept = new_end))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6),], aes(xintercept = new_end))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[1:6,], aes(xintercept = new_end))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 1:6,], aes(xintercept = new_end))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdat = test_data %>%
arrange(end_time) %>%
mutate(event = as.factor(row_number()))
test_data
pdat = test_data %>%
arrange(t_end) %>%
mutate(event = as.factor(row_number()))
pdup = pdat[rep(seq_len(nrow(pdat)), nrow(pdat)), ]
pdup$event_time = rep(pdat$t_end, each = nrow(pdat))
pdup$event_start = pdat$t_start
pdup = pdup %>%
mutate(in_risk_set = (event_time > t_start & event_time <= t_end),
event_observed = (t_start < t_end) & (event_time >= t_end))
pdup$facet_label = factor(rep(paste0("t=t", 1:6), each = 6),
levels = c("t=t1", "t=t2", "t=t3", "t=t4", "t=t5", "t=t6"),
labels = c("'t=t'[1]", "'t=t'[2]", "'t=t'[3]", "'t=t'[4]", "'t=t'[5]", "'t=t'[6]"))
pdup$stat = factor(pdup$stat, c(0,1), c("censored", "event"))
pdup %>%
ggplot(aes(y = event, yend = event, x = t_start, xend = t_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = t_start, xend = t_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = t_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = t_start, xend = t_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = t_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = t_start, xend = t_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "Status has been observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = t_end), colour = "grey75")
# all start at 0
pdat = test_data %>%
mutate(new_start = 0,
new_end = t_end - t_start) %>%
arrange(new_end) %>%
mutate(event = as.factor(row_number()))
pdup = pdat[rep(seq_len(nrow(pdat)), nrow(pdat)), ]
pdup$event_time = rep(pdat$new_end, each = nrow(pdat))
pdup$event_start = 0
pdup = pdup %>%
mutate(in_risk_set = (event_time > new_start & event_time <= new_end),
event_observed = (event_start < new_end) & (event_time >= new_end))
pdup$facet_label = factor(rep(paste0("t=t", 1:6), each = 6),
levels = c("t=t1", "t=t2", "t=t3", "t=t4", "t=t5", "t=t6"),
labels = c("'t=t'[1]", "'t=t'[2]", "'t=t'[3]", "'t=t'[4]", "'t=t'[5]", "'t=t'[6]"))
pdup$stat = factor(pdup$stat, c(0,1), c("censored", "event"))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = t_start, xend = t_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "Status has been observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = t_end), colour = "grey75")
pdat = test_data %>%
mutate(new_start = 0,
new_end = t_end - t_start) %>%
arrange(new_end) %>%
mutate(event = as.factor(row_number()))
pdup = pdat[rep(seq_len(nrow(pdat)), nrow(pdat)), ]
pdup$event_time = rep(pdat$new_end, each = nrow(pdat))
pdup$event_start = 0
pdup = pdup %>%
mutate(in_risk_set = (event_time > new_start & event_time <= new_end),
event_observed = (event_start < new_end) & (event_time >= new_end))
pdup$facet_label = factor(rep(paste0("t=t", 1:6), each = 6),
levels = c("t=t1", "t=t2", "t=t3", "t=t4", "t=t5", "t=t6"),
labels = c("'t=t'[1]", "'t=t'[2]", "'t=t'[3]", "'t=t'[4]", "'t=t'[5]", "'t=t'[6]"))
pdup$stat = factor(pdup$stat, c(0,1), c("censored", "event"))
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = t_start, xend = t_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "Status has been observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = t_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "Status has been observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = t_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "Status has been observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Status time", y = "Status rank", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() +
labs(x = "Time of event/censoring", y = element_blank(), shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = element_blank(), shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(0, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(NA, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank(), legend.position = "bottom") +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(NA, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(NA, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
# geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "Status observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = " ", shape = "Status", colour = "Status observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = "Observation", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(NA, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = "Observation", shape = "Status", colour = "Status observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(3, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = in_risk_set, fill = in_risk_set)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = "Observation", shape = "Status", colour = "In risk set") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(NA, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
pdup %>%
ggplot(aes(y = event, yend = event, x = new_start, xend = new_end,
colour = event_observed, fill = event_observed)) +
geom_segment() +
geom_point(aes(y = event, x = new_end, shape = as.factor(stat))) +
facet_wrap(facets = vars(facet_label), labeller = label_parsed) +
theme_bw() + theme(panel.grid = element_blank()) +
labs(x = "Time of event/censoring", y = "Observation", shape = "Status", colour = "Status observed") +
scale_y_discrete(limits = rev) +
scale_shape_manual(na.translate = FALSE, values = c(NA, 16)) +
guides(fill = "none") +
geom_vline(data = pdup[seq(1, 36, by = 6) + 0:5,], aes(xintercept = new_end), colour = "grey75")
